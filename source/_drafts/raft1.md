---
title: raft学习笔记
tags:
	- raft
Categories:
	- 一致性协议
---

Raft将一致性的问题分成了三个子问题：

1. leader选举： 一个leader必须在启动cluster的时候或者当一个leader失效的时候被选举出来。
2. 日志复制： leader必须接受client发来的log entries，并且跨集群的复制给别人，强制其他的节点日志必须和leader保持一致
3. 安全性： 如果一个状态机已经应用了一个确定的日志条目，那么其他节点不可能在同一个index上应用一个不同的日志条目



在任何时间，raft都要保证：

* 在给定的term上，至多有一个leader
* leader节点任何时间都不会重写或者删除他自己的log，他只会增加新的log
* 如果2个日志包含了相同的term和index，那么这个索引之前的日志条目都是相同的。
* 如果在给定的term中提交了一个日志条目，那么新的leader中必须包含这个term的日志信息
* 如果一个节点已经应用了log entry到状态机， 那么其他节点，不会为相同的索引，应用不同的日志。





term扮演了一个逻辑时钟的角色，他随着物理时间单调递增的，